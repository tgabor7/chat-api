(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{19:function(e,t,s){},20:function(e,t,s){},40:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),c=s(14),i=s.n(c),r=(s(19),s(2)),o=(s.p,s(20),s(0));var j=function(e){return e.show?Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"dialogContainer",children:[Object(o.jsx)("p",{children:e.message}),Object(o.jsx)("input",{type:"button",onClick:function(){e.setShow(!1)},value:"OK"})]})}):Object(o.jsx)("div",{})},l=s(5);var u=function(e){var t=Object(n.useState)(""),s=Object(r.a)(t,2),a=s[0],c=s[1],i=Object(n.useState)(""),u=Object(r.a)(i,2),d=u[0],b=u[1],h=Object(n.useState)(""),O=Object(r.a)(h,2),g=O[0],p=O[1],m=Object(n.useState)(""),x=Object(r.a)(m,2),v=x[0],f=x[1],N=Object(n.useState)(""),C=Object(r.a)(N,2),S=C[0],w=C[1],k=Object(n.useState)(""),y=Object(r.a)(k,2),P=y[0],I=y[1],F=Object(n.useState)(""),H=Object(r.a)(F,2),U=H[0],q=H[1],L=Object(n.useState)(""),R=Object(r.a)(L,2),B=R[0],E=R[1],T=Object(n.useState)(!1),A=Object(r.a)(T,2),D=A[0],J=A[1],K=function(){return(d.length<8?(I("Password is too short"),!1):(I(""),g!==d?(q("Confirm password has to be the same as password!"),!1):(q(""),!0)))&&(v.includes("@")?(w(""),!0):(w("Enter a valid e-mail!"),!1))};return 1===e.page?Object(o.jsxs)("div",{className:"loginContainer",children:[Object(o.jsx)("h1",{children:"Login"}),Object(o.jsxs)("form",{children:[Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,value:a,onChange:function(e){c(e.target.value)},type:"text"}),Object(o.jsx)("div",{className:"placeHolder",children:"Username"})]}),Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,type:"password",value:d,onChange:function(e){b(e.target.value)}}),Object(o.jsx)("div",{className:"placeHolder",children:"Password"})]}),Object(o.jsxs)("p",{children:["Don't have an account?",Object(o.jsx)("a",{onClick:function(){e.setPage(2)},children:"Sign up!"})]}),Object(o.jsx)("input",{className:"loginButton",type:"button",value:"Login",onClick:function(){l.post("http://localhost:4000/user/login",{name:a,password:d}).then((function(t){"Failed to login!"===t.data||"User not found"===t.data?alert(t.data):(e.updateUsers(a),e.login(a),e.setSender(a),window.sessionStorage.setItem("auth-token",t.data))}))}})]})]}):2===e.page?Object(o.jsxs)("div",{className:"loginContainer",children:[Object(o.jsx)("h1",{children:"Register"}),Object(o.jsxs)("form",{children:[Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,type:"text",value:a,onChange:function(e){c(e.target.value)}}),Object(o.jsx)("div",{className:"placeHolder",children:"Username"}),Object(o.jsx)("div",{className:"error",children:B})]}),Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,type:"text",value:v,onChange:function(e){f(e.target.value)}}),Object(o.jsx)("div",{className:"placeHolder",children:"e-mail"}),Object(o.jsx)("div",{className:"error",children:S})]}),Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,type:"password",value:d,onChange:function(e){b(e.target.value)}}),Object(o.jsx)("div",{className:"placeHolder",children:"Password"}),Object(o.jsx)("div",{className:"error",children:P})]}),Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,type:"password",value:g,onChange:function(e){p(e.target.value)}}),Object(o.jsx)("div",{className:"placeHolder",children:"Confirm password"}),Object(o.jsx)("div",{className:"error",children:U})]}),Object(o.jsxs)("p",{children:["Already have an account?",Object(o.jsx)("a",{onClick:function(){e.setPage(1)},children:"Log in!"})]}),Object(o.jsx)("input",{className:"loginButton",type:"button",value:"Register",onClick:function(){K()&&l.post("http://localhost:4000/user/register",{name:a,password:d}).then((function(e){"ok"===e.data&&J(!0),"Username taken"===e.data&&E("Username taken!")}))}})]}),Object(o.jsx)(j,{show:D,setShow:J,message:"Registered succesfully!"})]}):Object(o.jsx)("div",{})};s(5);var d=function(e){return 3!==e.page?Object(o.jsx)("div",{}):Object(o.jsxs)("div",{className:"dashboardContainer",children:[Object(o.jsx)("p",{children:"Available users"}),e.users]})};var b=function(){return Object(o.jsx)("div",{className:"footerContainer",children:Object(o.jsxs)("footer",{children:[Object(o.jsx)("p",{children:"Created by: Tark\xf3 G\xe1bor"}),Object(o.jsxs)("p",{children:["e-mail: ",Object(o.jsx)("a",{href:"mailto:tgabor7@gmail.com",children:"tgabor7@gmail.com"})]}),Object(o.jsx)("p",{children:Object(o.jsx)("a",{href:"mailto:https://github.com/tgabor7",children:"tgabor7"})})]})})};var h=function(e){return""===e.sender?Object(o.jsxs)("div",{className:"header",children:[" Chat app ",e.sender,Object(o.jsx)("input",{style:{float:"right"},type:"button",value:"login",onClick:function(){e.setPage(1)}})]}):Object(o.jsxs)("div",{className:"header",children:[" Chat app  ",Object(o.jsxs)("div",{children:["Logged in as ",Object(o.jsx)("div",{className:"username",children:e.sender}),Object(o.jsx)("input",{type:"button",value:"logout",onClick:function(){e.logout(),e.setPage(1)}})]})]})},O=s(5);var g=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),s=t[0],c=t[1],i=Object(n.useState)(""),j=Object(r.a)(i,2),l=j[0],g=j[1],p=Object(n.useState)(1),m=Object(r.a)(p,2),x=m[0],v=m[1],f=Object(n.useState)(""),N=Object(r.a)(f,2),C=N[0],S=N[1],w=Object(n.useState)(""),k=Object(r.a)(w,2),y=k[0],P=k[1],I=Object(n.useState)([]),F=Object(r.a)(I,2),H=F[0],U=F[1];Object(n.useEffect)((function(){""!==C&&""!==y&&q()}));var q=function(){L(y,C),console.log(window.sessionStorage.getItem("auth-token"))},L=function(e,t){var s="http://localhost:4000/chat/get/"+e+"/"+t,n={headers:{"auth-token":window.sessionStorage.getItem("auth-token")}};O.get(s,n).then((function(e){var s=e.data.map((function(e){return{message:e.message,sender:e.sender===t?0:1}}));c(s)}))};if(0!==x)return Object(o.jsxs)("div",{className:"mainContainer",children:[Object(o.jsx)(d,{users:H,page:x,setPage:v}),Object(o.jsx)(h,{logout:function(){v(0)},sender:C,setPage:v}),Object(o.jsx)(u,{page:x,updateUsers:function(e){O.get("http://localhost:4000/user").then((function(t){var s=t.data.map((function(t){if(t.name!==e)return Object(o.jsx)("div",{className:"userCard",onClick:function(){P(t.name),v(0)},children:t.name},t.name)}));U(s)}))},setPage:v,sender:C,setSender:S,login:function(e){v(3)}}),Object(o.jsx)(b,{})]});var R=a.a.createRef(),B=a.a.createRef(),E=a.a.createRef(),T=s.map((function(e){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:0==e.sender?"message0":"message1",children:[e.message," "]}),Object(o.jsx)("br",{}),Object(o.jsx)("br",{})]})}));return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(h,{logout:function(){S(""),v(0)},sender:C,setPage:v}),Object(o.jsxs)("div",{className:"mainContainer",children:[Object(o.jsx)("div",{className:"container",ref:E,children:Object(o.jsx)("div",{className:"messageContainer",children:T})}),Object(o.jsxs)("div",{className:"innercontainer",children:[Object(o.jsx)("input",{type:"text",className:"messageField",ref:B,onFocus:function(e){},onKeyPress:function(e){"Enter"===e.key&&R.current.click()},onChange:function(e){g(e.target.value)}}),Object(o.jsx)("input",{type:"button",ref:R,className:"sendButton",onClick:function(e){if(!(l.length<1)){!function(e){var t=s.slice();t.push({message:e,sender:0}),c(t)}(l),B.current.value="",g("");var t=E.current,n=t.offsetHeight;!function(e){O.post("http://localhost:4000/chat/post",{message:e,sender:C,receiver:y}).then((function(){}))}(l),alert(C),setTimeout((function(){t.scroll(0,n),n+=100}),100)}},value:"Send"})]}),Object(o.jsx)("div",{className:"name",children:y})]}),Object(o.jsx)(b,{})]})},p=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,41)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;s(e),n(e),a(e),c(e),i(e)}))};i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(g,{})}),document.getElementById("root")),p()}},[[40,1,2]]]);
//# sourceMappingURL=main.a7658d5e.chunk.js.map