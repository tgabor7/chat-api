(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{20:function(e,t,s){},21:function(e,t,s){},44:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),c=s(15),r=s.n(c),i=(s(20),s(2)),o=(s.p,s(21),s(0));var j=function(e){return e.show?Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"dialogContainer",children:[Object(o.jsx)("p",{children:e.message}),Object(o.jsx)("input",{type:"button",onClick:function(){e.setShow(!1)},value:"OK"})]})}):Object(o.jsx)("div",{})},l=s(5);var u=function(e){var t=Object(n.useState)(""),s=Object(i.a)(t,2),a=s[0],c=s[1],r=Object(n.useState)(""),u=Object(i.a)(r,2),d=u[0],b=u[1],O=Object(n.useState)(""),h=Object(i.a)(O,2),p=h[0],m=h[1],g=Object(n.useState)(""),v=Object(i.a)(g,2),x=v[0],f=v[1],N=Object(n.useState)(""),C=Object(i.a)(N,2),S=C[0],k=C[1],w=Object(n.useState)(""),y=Object(i.a)(w,2),P=y[0],I=y[1],T=Object(n.useState)(""),E=Object(i.a)(T,2),R=E[0],H=E[1],F=Object(n.useState)(""),U=Object(i.a)(F,2),_=U[0],L=U[1],q=Object(n.useState)(!1),B=Object(i.a)(q,2),D=B[0],A=B[1],K=function(){return(d.length<8?(I("Password is too short"),!1):(I(""),p!==d?(H("Confirm password has to be the same as password!"),!1):(H(""),!0)))&&(x.includes("@")?(k(""),!0):(k("Enter a valid e-mail!"),!1))};return 1===e.page?Object(o.jsxs)("div",{className:"loginContainer",children:[Object(o.jsx)("h1",{children:"Login"}),Object(o.jsxs)("form",{children:[Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,value:a,onChange:function(e){c(e.target.value)},type:"text"}),Object(o.jsx)("div",{className:"placeHolder",children:"Username"})]}),Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,type:"password",value:d,onChange:function(e){b(e.target.value)}}),Object(o.jsx)("div",{className:"placeHolder",children:"Password"})]}),Object(o.jsxs)("p",{children:["Don't have an account?",Object(o.jsx)("a",{onClick:function(){e.setPage(2)},children:"Sign up!"})]}),Object(o.jsx)("input",{className:"loginButton",type:"button",value:"Login",onClick:function(){l.post("https://test-756123.herokuapp.com/user/login",{name:a,password:d}).then((function(t){"Failed to login!"===t.data||"User not found"===t.data?alert(t.data):(e.updateUsers(a),e.login(a),e.setSender(a),window.sessionStorage.setItem("auth-token",t.data))}))}})]})]}):2===e.page?Object(o.jsxs)("div",{className:"loginContainer",children:[Object(o.jsx)("h1",{children:"Register"}),Object(o.jsxs)("form",{children:[Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,type:"text",value:a,onChange:function(e){c(e.target.value)}}),Object(o.jsx)("div",{className:"placeHolder",children:"Username"}),Object(o.jsx)("div",{className:"error",children:_})]}),Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,type:"text",value:x,onChange:function(e){f(e.target.value)}}),Object(o.jsx)("div",{className:"placeHolder",children:"e-mail"}),Object(o.jsx)("div",{className:"error",children:S})]}),Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,type:"password",value:d,onChange:function(e){b(e.target.value)}}),Object(o.jsx)("div",{className:"placeHolder",children:"Password"}),Object(o.jsx)("div",{className:"error",children:P})]}),Object(o.jsxs)("div",{className:"Input",children:[Object(o.jsx)("input",{required:!0,type:"password",value:p,onChange:function(e){m(e.target.value)}}),Object(o.jsx)("div",{className:"placeHolder",children:"Confirm password"}),Object(o.jsx)("div",{className:"error",children:R})]}),Object(o.jsxs)("p",{children:["Already have an account?",Object(o.jsx)("a",{onClick:function(){e.setPage(1)},children:"Log in!"})]}),Object(o.jsx)("input",{className:"loginButton",type:"button",value:"Register",onClick:function(){K()&&l.post("https://test-756123.herokuapp.com/user/register",{name:a,password:d}).then((function(e){"ok"===e.data&&A(!0),"Username taken"===e.data&&L("Username taken!")}))}})]}),Object(o.jsx)(j,{show:D,setShow:A,message:"Registered succesfully!"})]}):Object(o.jsx)("div",{})};s(5);var d=function(e){return 3!==e.page?Object(o.jsx)("div",{}):Object(o.jsxs)("div",{className:"dashboardContainer",children:[Object(o.jsx)("p",{children:"Available users"}),e.users]})};var b=function(){return Object(o.jsx)("div",{className:"footerContainer",children:Object(o.jsxs)("footer",{children:[Object(o.jsx)("p",{children:"Created by: Tark\xf3 G\xe1bor"}),Object(o.jsxs)("p",{children:["e-mail: ",Object(o.jsx)("a",{href:"mailto:tgabor7@gmail.com",children:"tgabor7@gmail.com"})]}),Object(o.jsx)("p",{children:Object(o.jsx)("a",{href:"mailto:https://github.com/tgabor7",children:"tgabor7"})})]})})};var O=function(e){return""===e.sender?Object(o.jsxs)("div",{className:"header",children:[" Chat app ",e.sender,Object(o.jsx)("input",{style:{float:"right"},type:"button",value:"login",onClick:function(){e.setPage(1)}})]}):Object(o.jsxs)("div",{className:"header",children:[" Chat app  ",Object(o.jsxs)("div",{children:["Logged in as ",Object(o.jsx)("div",{className:"username",children:e.sender}),Object(o.jsx)("input",{type:"button",value:"logout",onClick:function(){e.logout(),e.setPage(1)}})]})]})},h=s(5);s(40);var p=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),s=t[0],c=t[1],r=Object(n.useState)(""),j=Object(i.a)(r,2),l=j[0],p=j[1],m=Object(n.useState)(1),g=Object(i.a)(m,2),v=g[0],x=g[1],f=Object(n.useState)(""),N=Object(i.a)(f,2),C=N[0],S=N[1],k=Object(n.useState)(""),w=Object(i.a)(k,2),y=w[0],P=w[1],I=Object(n.useState)([]),T=Object(i.a)(I,2),E=T[0],R=T[1];Object(n.useEffect)((function(){alert(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT),""!==C&&""!==y&&H()}));var H=function(){F(y,C),console.log(window.sessionStorage.getItem("auth-token"))},F=function(e,t){var s="https://test-756123.herokuapp.com/chat/get/"+e+"/"+t,n={headers:{"auth-token":window.sessionStorage.getItem("auth-token")}};h.get(s,n).then((function(e){var s=e.data.map((function(e){return{message:e.message,sender:e.sender===t?0:1}}));c(s)}))};if(0!==v)return Object(o.jsxs)("div",{className:"mainContainer",children:[Object(o.jsx)(d,{users:E,page:v,setPage:x}),Object(o.jsx)(O,{logout:function(){x(0)},sender:C,setPage:x}),Object(o.jsx)(u,{page:v,updateUsers:function(e){h.get("https://test-756123.herokuapp.com/user").then((function(t){var s=t.data.map((function(t){if(t.name!==e)return Object(o.jsx)("div",{className:"userCard",onClick:function(){P(t.name),x(0)},children:t.name},t.name)}));R(s)}))},setPage:x,sender:C,setSender:S,login:function(e){x(3)}}),Object(o.jsx)(b,{})]});var U=a.a.createRef(),_=a.a.createRef(),L=a.a.createRef(),q=s.map((function(e){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:0==e.sender?"message0":"message1",children:[e.message," "]}),Object(o.jsx)("br",{}),Object(o.jsx)("br",{})]})}));return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(O,{logout:function(){S(""),x(0)},sender:C,setPage:x}),Object(o.jsxs)("div",{className:"mainContainer",children:[Object(o.jsx)("div",{className:"container",ref:L,children:Object(o.jsx)("div",{className:"messageContainer",children:q})}),Object(o.jsxs)("div",{className:"innercontainer",children:[Object(o.jsx)("input",{type:"text",className:"messageField",ref:_,onFocus:function(e){},onKeyPress:function(e){"Enter"===e.key&&U.current.click()},onChange:function(e){p(e.target.value)}}),Object(o.jsx)("input",{type:"button",ref:U,className:"sendButton",onClick:function(e){if(!(l.length<1)){!function(e){var t=s.slice();t.push({message:e,sender:0}),c(t)}(l),_.current.value="",p("");var t=L.current,n=t.offsetHeight;!function(e){h.post("https://test-756123.herokuapp.com/chat/post",{message:e,sender:C,receiver:y}).then((function(){}))}(l),setTimeout((function(){t.scroll(0,n),n+=100}),100)}},value:"Send"})]}),Object(o.jsx)("div",{className:"nameContainer",children:Object(o.jsx)("div",{className:"name",children:y})})]}),Object(o.jsx)(b,{})]})},m=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,45)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),c(e),r(e)}))};r.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(p,{})}),document.getElementById("root")),m()}},[[44,1,2]]]);
//# sourceMappingURL=main.8ad20ba3.chunk.js.map